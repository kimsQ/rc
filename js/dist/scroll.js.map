{"version":3,"sources":["../src/scroll.js"],"names":[],"mappings":"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","file":"scroll.js","sourcesContent":["/* ========================================================================\n * Retchet Plust - Scroll.js\n * http://rc.kimsq.com/controls/affix/  (when data-type=\"affix\")\n * http://rc.kimsq.com/controls/updown/  (when data-type=\"updown\")\n * ========================================================================\n * Inspired by http://getbootstrap.com/javascript/#affix\n * Copyright 2016 redblock inc.\n * Author kiere (kiere@kimsq.com)\n * Licensed under MIT.\n * ======================================================================== */\n\n+function ($) {\n  'use strict';\n\n      // SCROLL CLASS DEFINITION\n      // ======================\n\n      var Scroll = function (element, options) {\n            this.options = $.extend({}, Scroll.DEFAULTS, options)\n          \n            this.$target = $(this.options.target)\n                 .on('scroll.rc.scroll.data-api', $.proxy(this.checkPosition, this))\n                 .on('tap.rc.scroll.data-api',  $.proxy(this.checkPositionWithEventLoop, this))\n          \n            this.$element     = $(element)\n            this.type=this.options.type// affix , detect, ....\n            this.scrolled      = null\n            this.unpin        = null\n            this.pinnedOffset = null\n            this.lastScrollTop=0\n            this.defaultHeight =this.options.defaultheight?this.options.defaultheight:280\n            this.delta=this.options.delta?this.options.delta:5;\n\n            this.checkPosition()\n      }\n\n      Scroll.VERSION  = '1.0.0'\n\n      Scroll.Affix_RESET    = 'affix affix-top affix-bottom'\n\n      Scroll.DEFAULTS = {\n            offset: 0,\n            target: '.content'\n      }\n\n      Scroll.prototype.getState = function (scrollHeight, height, offsetTop, offsetBottom) {\n            var scrollTop    = this.$target.scrollTop()\n            var position     = this.$element.offset()\n            var targetHeight = this.$target.height()\n\n            if (offsetTop != null && this.affixed == 'top') return scrollTop < offsetTop ? 'top' : false\n\n            if (this.affixed == 'bottom') {\n                 if (offsetTop != null) return (scrollTop + this.unpin <= position.top) ? false : 'bottom'\n                 return (scrollTop + targetHeight <= scrollHeight - offsetBottom) ? false : 'bottom'\n            }\n\n            var initializing   = this.affixed == null\n            var colliderTop    = initializing ? scrollTop : position.top\n            var colliderHeight = initializing ? targetHeight : height\n\n            if (offsetTop != null && scrollTop <= offsetTop) return 'top'\n            if (offsetBottom != null && (colliderTop + colliderHeight >= scrollHeight - offsetBottom)) return 'bottom'\n\n            return false\n      }\n\n      Scroll.prototype.getPinnedOffset = function () {\n            if (this.pinnedOffset) return this.pinnedOffset\n            this.$element.removeClass(Scroll.Affix_RESET).addClass('affix')\n            var scrollTop = this.$target.scrollTop()\n            var position  = this.$element.offset()\n            return (this.pinnedOffset = position.top - scrollTop)\n      }\n\n      Scroll.prototype.checkPositionWithEventLoop = function () {\n            setTimeout($.proxy(this.checkPosition, this), 1)\n      }\n\n      Scroll.prototype.checkPosition = function () {\n            if (!this.$element.is(':visible')) return\n\n            var height       = this.$element.height()\n            var offset       = this.options.offset\n            var offsetTop    = offset.top\n            var offsetBottom = offset.bottom\n            var scrollHeight = Math.max($(document).height(), $(document.body).height())\n\n            if (typeof offset != 'object')         offsetBottom = offsetTop = offset\n            if (typeof offsetTop == 'function')    offsetTop    = offset.top(this.$element)\n            if (typeof offsetBottom == 'function') offsetBottom = offset.bottom(this.$element)\n             \n            var affix = this.getState(scrollHeight, height, offsetTop, offsetBottom)\n            \n            // when affix \n            if(this.type=='affix'){\n                  if (this.affixed != affix) {\n                        if (this.unpin != null) this.$element.css('top', '')\n\n                        var affixType = 'affix' + (affix ? '-' + affix : '')\n                        var e         = $.Event(affixType + '.rc.scroll')\n                        \n                        this.$element.trigger(e)\n\n                        if (e.isDefaultPrevented()) return\n\n                        this.affixed = affix\n                        this.unpin = affix == 'bottom' ? this.getPinnedOffset() : null\n\n                        this.$element\n                          .removeClass(Scroll.Affix_RESET)\n                          .addClass(affixType)\n                          .trigger(affixType.replace('affix', 'affixed') + '.rc.scroll')\n                  }\n\n                  if (affix == 'bottom') {\n                        this.$element.offset({\n                          top: scrollHeight - height - offsetBottom\n                        })\n                  }\n            }else if(this.type=='updown'){\n                 var lastScrollTop=this.lastScrollTop,\n                      nowScrollTop=$(this.$target).scrollTop(),\n                      scrollEvent,\n                      state=Math.abs(lastScrollTop - nowScrollTop) >= this.delta;\n                       if(state==true){\n                            if(nowScrollTop < this.defaultHeight) scrollEvent=$.Event('default.rc.scroll');\n                            else{\n                      \t           if(nowScrollTop>lastScrollTop) scrollEvent=$.Event('down.rc.scroll');  \n                      \t           else scrollEvent=$.Event('up.rc.scroll');\n                      \t      }\n                      \t      this.$element.trigger(scrollEvent); // trigger event \n                            this.lastScrollTop=nowScrollTop;  // update lastScrollTop     \t      \n                      }                      \n            } \n\n      }\n\n      // SCROLL PLUGIN DEFINITION\n      // =======================\n\n      function Plugin(option) {\n            return this.each(function () {\n                  var $this   = $(this)\n                  var data    = $this.data('rc.scroll')\n                  var options = typeof option == 'object' && option\n\n                  if (!data) $this.data('rc.scroll', (data = new Scroll(this, options)))\n                  if (typeof option == 'string') data[option]()\n            })\n      }\n\n      var old = $.fn.scroll\n\n      $.fn.scroll             = Plugin\n      $.fn.scroll.Constructor = Scroll\n\n\n      // SCROLL NO CONFLICT\n      // =================\n\n      $.fn.scroll.noConflict = function () {\n            $.fn.scroll = old\n            return this\n      }\n\n\n      // SCROLL DATA-API\n      // ==============\n\n      $(window).on('load', function () {\n            $('[data-control=\"scroll\"]').each(function () {\n                  var $spy = $(this)\n                  var data = $spy.data()\n\n                  data.offset = data.offset || {}\n\n                  if (data.offsetBottom != null) data.offset.bottom = data.offsetBottom\n                  if (data.offsetTop    != null) data.offset.top    = data.offsetTop\n                  Plugin.call($spy, data)\n            })\n      })\n\n}(jQuery);"]}